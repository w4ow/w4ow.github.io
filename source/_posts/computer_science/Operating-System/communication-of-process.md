---
title: 进程间的通信方式
date: 2015-03-09 14:12
updated: 2015-03-09 14:12
mathjax: true
meta:
    date: false
categories: 
    - Computer Science
    - Operating System
tags:
    - Process
---

同步与通信是并发进程交互的两个基本要求。进程同步主要解决临界区问题，进程通信指进程间的信息交换。

---

<!-- more -->

## 1. 进程通信的概念

进程的特征之一是其具有独立性，一个进程不能访问另一个进程的程序或者数据，以保证进程之间不会相互干扰，但这样也造成了进程间无法直接交换数据。

一般而言，进程通过两种方案来实现进程间的通信

1. 发送、接受双方通过磁盘等外设交换数据。这种通信方式需要I/O操作的支持。
2. 利用内核运行在内核态的特点，通过对内核空间读写来交换数据。这种通信方式是在内存中完成的。

根据进程通信交换信息量的大小，可以将进程通信分为两种：

1. 低级通信。进程之间一次只传输少量数据，速度快，效率低，通信过程对用户不透明。这类通信主要用于互斥与同步的工具，P、V原语是低级通信原语
2. 高级通信。一次可以传输大量信息，效率高，对用户透明，编程简单。高级通信又分为三种：
    - 共享内存通信方式：利用共享内存通信；
    - 消息传递通信方式：利用OS提供的消息系统通信；
    - 共享文件通信方式：又被称为管道通信。

高级通信方式既适用于集中式操作系统，又适用于分布式操作系统。

## 2. 共享内存通信方式

共享内存是指在内存中划出一块区域作为数据共享区，称为共享内存分区，**通信双方将自己的虚拟地址空间映射到共享内存分区上**。通信时通过对该分区读写实现通信。该方式是进程间最快捷、最有效的通信方式，Unix、Windows和OSX都采用了这种通信方式。

## 3. 消息缓冲(消息队列)通信方式

消息缓冲属于**直接通信**方式，该方法中，发送进程直接发送原语到接收进程的消息队列，而接受进程使用接受原语从消息队列中取出信息，进程间以**消息**为单位进行信息交换。该方法与生产者-消费者问题类似。该方式与共享内存有点相似，该方法**使用内存中的公用消息缓冲区来传递消息**。

## 4. 信箱通信方式

该方式是**间接通信**方式，通信双方通过一种叫**信箱**的共享数据结构来进行交互。该方法和消息队列没什么区别，也是在内存中设置一种特殊的数据结构。

## 5. 管道通信方式

所谓的**管道就是一种共享通信文件**，也称为pipe文件，专门用于进程间通信。管道有三个特点：

1. 管道专门用于特性
2. 管道只能**单向传送数据**
3. 管道对用户透明

管道分为两种：

1. 无名管道。无名管道是利用系统调用pipe建立起来的无路径名的无名文件，并且是一个临时文件，该文件物理上由文件系统的高速缓冲区构成，且很少启动外部设备。当进程不再需要无名管道时，系统关闭并回收与它相关联的索引节点。此外，通过文件系统看不到无名管道的存在。
2. 有名管道。有名管道是一个有目录和索引的长期存在的真实文件，不能与文件系统中的任何文件重名，且在文件系统中能看到该有名管道。

## 6. 信号量

## 7. 套接字